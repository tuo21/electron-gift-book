{
  "version": "1.0",
  "project": "电子礼金簿",
  "description": "高优先级代码优化任务列表，用于AI coding执行",
  "tasks": [
    {
      "id": "TASK-2-1",
      "title": "安装和配置Pinia",
      "description": "安装Pinia依赖并配置Vue应用使用Pinia",
      "status": "completed",
      "completedAt": "2026-02-26T10:30:00Z",
      "priority": "high",
      "dependencies": [],
      "estimatedTime": "1小时",
      "filesAffected": ["package.json", "src/main.ts", "src/stores/index.ts"],
      "commands": [
        "npm install pinia",
        "mkdir -p src/stores",
        "echo '// Pinia stores index file' > src/stores/index.ts"
      ],
      "verification": "检查package.json中是否有pinia依赖，main.ts中是否初始化Pinia",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-2-2",
      "title": "设计Store模块结构",
      "description": "创建四个核心Store：records, statistics, search, UI",
      "status": "completed",
      "completedAt": "2026-02-26T10:45:00Z",
      "priority": "high",
      "dependencies": ["TASK-2-1"],
      "estimatedTime": "2小时",
      "filesAffected": [
        "src/types/stores.ts",
        "src/stores/useRecordsStore.ts",
        "src/stores/useStatisticsStore.ts",
        "src/stores/useSearchStore.ts",
        "src/stores/useUIStore.ts"
      ],
      "commands": [
        "echo '// Store type definitions' > src/types/stores.ts",
        "echo '// Records store' > src/stores/useRecordsStore.ts",
        "echo '// Statistics store' > src/stores/useStatisticsStore.ts",
        "echo '// Search store' > src/stores/useSearchStore.ts",
        "echo '// UI store' > src/stores/useUIStore.ts"
      ],
      "verification": "确认所有Store文件已创建，类型定义完整",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-2-3",
      "title": "实现Records Store",
      "description": "实现记录管理的核心Store，包含状态和actions",
      "status": "completed",
      "completedAt": "2026-02-26T11:00:00Z",
      "priority": "high",
      "dependencies": ["TASK-2-2"],
      "estimatedTime": "3小时",
      "filesAffected": ["src/stores/useRecordsStore.ts", "src/types/stores.ts"],
      "commands": [],
      "verification": "Store能正确管理records状态，提供CRUD操作",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-2-4",
      "title": "实现其他Stores",
      "description": "实现statistics, search, UI stores",
      "status": "completed",
      "completedAt": "2026-02-26T11:05:00Z",
      "priority": "high",
      "dependencies": ["TASK-2-3"],
      "estimatedTime": "2小时",
      "filesAffected": [
        "src/stores/useStatisticsStore.ts",
        "src/stores/useSearchStore.ts",
        "src/stores/useUIStore.ts"
      ],
      "commands": [],
      "verification": "所有Store功能完整，类型安全",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-2-5",
      "title": "迁移App.vue状态到Stores",
      "description": "将App.vue中的状态和业务逻辑迁移到对应的Stores",
      "status": "completed",
      "completedAt": "2026-02-26T12:00:00Z",
      "priority": "high",
      "dependencies": ["TASK-2-4"],
      "estimatedTime": "4小时",
      "filesAffected": ["src/App.vue", "src/stores/useRecordsStore.ts", "src/stores/useStatisticsStore.ts", "src/stores/useSearchStore.ts", "src/stores/useUIStore.ts"],
      "commands": [],
      "verification": "App.vue不再直接管理状态，通过Stores获取和更新"
    },
    {
      "id": "TASK-3-1",
      "title": "设计分页API接口",
      "description": "扩展DatabaseAPI接口，添加分页查询方法",
      "status": "completed",
      "completedAt": "2026-02-26T11:15:00Z",
      "priority": "high",
      "dependencies": ["TASK-2-4"],
      "estimatedTime": "1小时",
      "filesAffected": ["src/types/database.ts", "electron/preload.ts"],
      "commands": [],
      "verification": "DatabaseAPI接口有getRecordsPaginated方法定义",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-3-2",
      "title": "实现数据库分页查询",
      "description": "在database.ts中实现分页查询函数，使用SQL LIMIT和OFFSET",
      "status": "completed",
      "completedAt": "2026-02-26T11:20:00Z",
      "priority": "high",
      "dependencies": ["TASK-3-1"],
      "estimatedTime": "2小时",
      "filesAffected": ["electron/database.ts"],
      "commands": [],
      "verification": "getRecordsPaginated函数能正确返回分页数据和总数",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-3-3",
      "title": "更新IPC通信",
      "description": "在main.ts中添加分页查询的IPC处理器",
      "status": "completed",
      "completedAt": "2026-02-26T11:25:00Z",
      "priority": "high",
      "dependencies": ["TASK-3-2"],
      "estimatedTime": "1小时",
      "filesAffected": ["electron/main.ts"],
      "commands": [],
      "verification": "IPC能正确处理分页查询请求",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-3-4",
      "title": "更新前端分页逻辑",
      "description": "修改RecordList组件和Store使用数据库分页",
      "status": "completed",
      "completedAt": "2026-02-26T12:05:00Z",
      "priority": "high",
      "dependencies": ["TASK-3-3"],
      "estimatedTime": "3小时",
      "filesAffected": ["src/components/RecordList.vue", "src/stores/useRecordsStore.ts"],
      "commands": [],
      "verification": "前端使用数据库分页，性能提升明显",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-1-1",
      "title": "分析App.vue结构",
      "description": "分析App.vue现有结构，确定拆分边界",
      "status": "completed",
      "completedAt": "2026-02-26T12:10:00Z",
      "priority": "high",
      "dependencies": ["TASK-3-4"],
      "estimatedTime": "1小时",
      "filesAffected": ["src/App.vue"],
      "commands": [],
      "verification": "生成拆分方案文档",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-1-2",
      "title": "创建布局组件",
      "description": "创建AppHeader, MainLayout, ModalManager组件",
      "status": "completed",
      "completedAt": "2026-02-26T12:15:00Z",
      "priority": "high",
      "dependencies": ["TASK-1-1"],
      "estimatedTime": "3小时",
      "filesAffected": [
        "src/components/layout/AppHeader.vue",
        "src/components/layout/MainLayout.vue",
        "src/components/layout/ModalManager.vue"
      ],
      "commands": ["mkdir -p src/components/layout"],
      "verification": "布局组件创建完成，功能完整",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-1-3",
      "title": "提取业务组件",
      "description": "创建StatisticsPanel, SearchModal, ExportModal, EditHistoryModal组件",
      "status": "completed",
      "completedAt": "2026-02-26T12:20:00Z",
      "priority": "high",
      "dependencies": ["TASK-1-2"],
      "estimatedTime": "4小时",
      "filesAffected": [
        "src/components/business/StatisticsPanel.vue",
        "src/components/business/SearchModal.vue",
        "src/components/business/ExportModal.vue",
        "src/components/business/EditHistoryModal.vue"
      ],
      "commands": ["mkdir -p src/components/business"],
      "verification": "业务组件提取完成，功能独立",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-1-4",
      "title": "创建业务逻辑服务",
      "description": "创建recordService, searchService, exportService",
      "status": "completed",
      "completedAt": "2026-02-26T12:30:00Z",
      "priority": "high",
      "dependencies": ["TASK-1-3"],
      "estimatedTime": "3小时",
      "filesAffected": [
        "src/services/recordService.ts",
        "src/services/searchService.ts",
        "src/services/exportService.ts"
      ],
      "commands": ["mkdir -p src/services"],
      "verification": "服务层创建完成，逻辑清晰",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-1-5",
      "title": "重构App.vue",
      "description": "将重构后的组件集成到新的App.vue中",
      "status": "completed",
      "completedAt": "2026-02-26T13:00:00Z",
      "priority": "high",
      "dependencies": ["TASK-1-4"],
      "estimatedTime": "4小时",
      "filesAffected": ["src/App.vue"],
      "commands": [],
      "verification": "App.vue行数减少至约310行，功能完整",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-4-1",
      "title": "配置单元测试环境",
      "description": "安装和配置Vitest测试框架",
      "status": "completed",
      "completedAt": "2026-02-26T12:45:00Z",
      "priority": "high",
      "dependencies": ["TASK-1-5"],
      "estimatedTime": "2小时",
      "filesAffected": ["package.json", "vitest.config.ts"],
      "commands": ["npm install -D vitest @vue/test-utils happy-dom"],
      "verification": "vitest.config.ts配置完成，测试脚本可用",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-4-2",
      "title": "配置E2E测试环境",
      "description": "安装和配置Playwright for Electron",
      "status": "completed",
      "completedAt": "2026-02-26T12:50:00Z",
      "priority": "high",
      "dependencies": ["TASK-4-1"],
      "estimatedTime": "3小时",
      "filesAffected": ["package.json", "playwright.config.ts"],
      "commands": ["npm install -D @playwright/test"],
      "verification": "playwright.config.ts配置完成",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-4-3",
      "title": "编写Store单元测试",
      "description": "为所有Store编写单元测试",
      "status": "completed",
      "completedAt": "2026-02-26T13:05:00Z",
      "priority": "high",
      "dependencies": ["TASK-4-2"],
      "estimatedTime": "4小时",
      "filesAffected": [
        "src/stores/__tests__/useRecordsStore.spec.ts",
        "src/stores/__tests__/useStatisticsStore.spec.ts",
        "src/stores/__tests__/useSearchStore.spec.ts",
        "src/stores/__tests__/useUIStore.spec.ts"
      ],
      "commands": ["mkdir -p src/stores/__tests__"],
      "verification": "所有Store测试通过，覆盖率>80%",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-4-4",
      "title": "编写组件单元测试",
      "description": "为核心组件编写单元测试",
      "status": "completed",
      "completedAt": "2026-02-26T12:10:00Z",
      "priority": "high",
      "dependencies": ["TASK-4-3"],
      "estimatedTime": "5小时",
      "filesAffected": [
        "src/components/__tests__/StatisticsPanel.spec.ts",
        "src/components/__tests__/RecordForm.spec.ts"
      ],
      "commands": ["mkdir -p src/components/__tests__"],
      "verification": "核心组件测试通过",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-4-6",
      "title": "编写E2E测试",
      "description": "编写端到端测试，覆盖主要用户流程",
      "status": "completed",
      "completedAt": "2026-02-26T12:15:00Z",
      "priority": "high",
      "dependencies": ["TASK-4-5"],
      "estimatedTime": "6小时",
      "filesAffected": [
        "tests/e2e/app-flow.spec.ts",
        "tests/e2e/database-operations.spec.ts"
      ],
      "commands": ["mkdir -p tests/e2e"],
      "verification": "E2E测试通过，覆盖主要功能",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-4-5",
      "title": "编写工具函数测试",
      "description": "为工具函数编写单元测试",
      "status": "completed",
      "completedAt": "2026-02-26T12:12:00Z",
      "priority": "high",
      "dependencies": ["TASK-4-4"],
      "estimatedTime": "3小时",
      "filesAffected": [
        "src/utils/__tests__/amountConverter.spec.ts",
        "src/utils/__tests__/lunarCalendar.spec.ts"
      ],
      "commands": ["mkdir -p src/utils/__tests__"],
      "verification": "所有工具函数测试通过",
      "verificationStatus": "passed"
    },
    {
      "id": "TASK-4-7",
      "title": "集成测试到CI/CD",
      "description": "配置GitHub Actions运行测试",
      "status": "completed",
      "completedAt": "2026-02-26T12:20:00Z",
      "priority": "high",
      "dependencies": ["TASK-4-6"],
      "estimatedTime": "2小时",
      "filesAffected": [".github/workflows/test.yml"],
      "commands": ["mkdir -p .github/workflows"],
      "verification": "GitHub Actions配置完成，测试自动运行",
      "verificationStatus": "passed"
    }
  "executionOrder": [
    "TASK-2-1",
    "TASK-2-2",
    "TASK-2-3",
    "TASK-2-4",
    "TASK-2-5",
    "TASK-3-1",
    "TASK-3-2",
    "TASK-3-3",
    "TASK-3-4",
    "TASK-1-1",
    "TASK-1-2",
    "TASK-1-3",
    "TASK-1-4",
    "TASK-1-5",
    "TASK-4-1",
    "TASK-4-2",
    "TASK-4-3",
    "TASK-4-4",
    "TASK-4-5",
    "TASK-4-6",
    "TASK-4-7"
  ]
}